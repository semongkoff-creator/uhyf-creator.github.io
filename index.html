<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surat Digital Romantis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400;1,600&family=Crimson+Pro:ital,wght@0,400;0,600;1,400&family=Dancing+Script:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Cormorant Garamond', serif;
            background: linear-gradient(135deg, #f4ece1 0%, #e9dcc9 50%, #dfd3c3 75%, #c9b79c 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        /* Noise Texture */
        .noise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            opacity: 0.35;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }
        /* Radial Vignette */
        .vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
            background: radial-gradient(ellipse at center, transparent 40%, rgba(80, 50, 30, 0.15) 70%, rgba(80, 50, 30, 0.25) 100%);
        }
        /* Floating Flowers */
        .flower {
            position: fixed;
            font-size: 28px;
            opacity: 0;
            pointer-events: none;
            z-index: 10;
            will-change: transform, opacity;
        }
        /* Corner Decorations */
        .corner-decor {
            position: fixed;
            font-size: 60px;
            opacity: 0.2;
            z-index: 50;
            will-change: transform;
        }
        .corner-tl { top: 20px; left: 20px; animation: floatTL 5s ease-in-out infinite; }
        .corner-tr { top: 20px; right: 20px; animation: floatTR 4.5s ease-in-out infinite; }
        .corner-bl { bottom: 20px; left: 20px; animation: floatBL 5.5s ease-in-out infinite; }
        .corner-br { bottom: 20px; right: 20px; animation: floatBR 4s ease-in-out infinite; }
        @keyframes floatTL {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(8deg); }
        }
        @keyframes floatTR {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(12px) rotate(-6deg); }
        }
        @keyframes floatBL {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(-8deg); }
        }
        @keyframes floatBR {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(15px) rotate(6deg); }
        }
        /* Page Containers */
        .page {
            display: none;
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }
        .page.active {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        /* PAGE 1: Envelope */
        .envelope-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            transition: all 0.8s ease-in-out;
        }
        .envelope-wrapper.expanded {
            opacity: 0;
            transform: scale(1.5);
        }
        .envelope {
            width: 380px;
            height: 260px;
            cursor: pointer;
            transition: all 0.8s ease-in-out;
            position: relative;
        }
        .envelope:hover {
            transform: scale(1.03);
        }
        .envelope.opening {
            transform: scale(1.1);
        }
        .envelope-body {
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, #9b4444 0%, #7a2525 25%, #8b3a3a 50%, #6b1a1a 75%, #a52a2a 100%);
            border-radius: 0 0 10px 10px;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.1) inset,
                0 8px 20px rgba(0, 0, 0, 0.15) inset,
                0 15px 50px rgba(60, 25, 20, 0.45),
                0 4px 12px rgba(60, 25, 20, 0.3);
        }
        .envelope-body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 1px,
                rgba(0, 0, 0, 0.015) 1px,
                rgba(0, 0, 0, 0.015) 2px
            );
            pointer-events: none;
        }
        .envelope-body::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 60%;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.08) 0%, transparent 100%);
            pointer-events: none;
        }
        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 190px solid transparent;
            border-right: 190px solid transparent;
            border-bottom: 130px solid #8b3a3a;
            transform-origin: top;
            transition: transform 0.6s ease-in-out;
            z-index: 2;
            filter: drop-shadow(0 -2px 3px rgba(0, 0, 0, 0.15));
        }
        .envelope-flap::after {
            content: '';
            position: absolute;
            top: 0;
            left: -190px;
            width: 380px;
            height: 130px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.12) 0%, transparent 60%);
            pointer-events: none;
        }
        .envelope.opening .envelope-flap {
            transform: rotateX(-180deg);
        }
        .envelope-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 100px;
            z-index: 1;
            transition: all 0.6s ease-in-out;
        }
        .envelope.opening .envelope-content {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.5);
        }
        /* Fullscreen Card */
        .fullscreen-card {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f4ece1 0%, #e9dcc9 50%, #dfd3c3 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.8s ease-in-out;
            z-index: 100;
        }
        .fullscreen-card.active {
            opacity: 1;
            visibility: visible;
        }
        .card-content {
            background: linear-gradient(145deg, #fdfbf9 0%, #f5f1eb 50%, #f0ece5 100%);
            backdrop-filter: blur(25px);
            padding: 60px 50px;
            border-radius: 20px;
            max-width: 600px;
            text-align: center;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.08) inset,
                0 20px 60px rgba(80, 50, 30, 0.25),
                0 8px 25px rgba(80, 50, 30, 0.15);
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.6s ease-in-out 0.3s;
        }
        .fullscreen-card.active .card-content {
            transform: scale(1);
            opacity: 1;
        }
        .card-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 48px;
            font-style: italic;
            color: #a94442;
            margin-bottom: 25px;
        }
        .card-message {
            font-family: 'Crimson Pro', serif;
            font-size: 20px;
            line-height: 1.8;
            color: #5a4a3a;
            margin-bottom: 35px;
        }
        .card-btn {
            padding: 16px 50px;
            border-radius: 50px;
            background: linear-gradient(135deg, #a94442, #8b3a3a);
            color: #f5f1e8;
            font-family: 'Cormorant Garamond', serif;
            font-size: 20px;
            font-style: italic;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .card-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(139, 58, 58, 0.4);
        }
        /* PAGE 2: Letter */
        .letter-container {
            background: linear-gradient(145deg, #fdfbf9 0%, #f5f1eb 50%, #f0ece5 100%);
            backdrop-filter: blur(25px);
            max-width: 700px;
            width: 100%;
            margin: 40px auto;
            padding: 70px 60px;
            position: relative;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.06) inset,
                0 15px 50px rgba(80, 50, 30, 0.2),
                0 5px 20px rgba(80, 50, 30, 0.12);
            border: 1px solid rgba(180, 150, 120, 0.25);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .letter-container:hover {
            transform: scale(1.02);
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.06) inset,
                0 20px 60px rgba(80, 50, 30, 0.3),
                0 8px 30px rgba(139, 58, 58, 0.25);
        }
        .letter-container:hover .letter-click-hint {
            opacity: 1;
        }
        .letter-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 8px solid transparent;
            border-image: radial-gradient(circle, transparent 25%, rgba(139, 89, 71, 0.15) 30%, transparent 35%) 30 round;
            pointer-events: none;
        }
        .letter-lines {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: repeating-linear-gradient(
                transparent,
                transparent 26px,
                rgba(139, 89, 71, 0.12) 27px,
                rgba(139, 89, 71, 0.12) 28px
            );
            pointer-events: none;
        }
        .letter-margin-line {
            position: absolute;
            left: 35px;
            top: 0;
            bottom: 0;
            width: 1.5px;
            background: rgba(169, 68, 66, 0.2);
        }
        /* Postage Stamps */
        .stamps-container {
            position: absolute;
            top: 10px;
            right: 15px;
            display: flex;
            gap: 6px;
            z-index: 5;
        }
        .stamp {
            width: 40px;
            height: 48px;
            background: linear-gradient(180deg, #fdf9ed 0%, #f5efe3 100%);
            border: 1px dashed rgba(169, 68, 66, 0.4);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 1px 4px rgba(80, 50, 30, 0.1);
        }
        .stamp-icon {
            font-size: 18px;
        }
        .stamp-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 5px;
            color: #8b3a3a;
            margin-top: 1px;
            letter-spacing: 0.5px;
        }
        /* Postmark */
        .postmark {
            position: absolute;
            bottom: 15px;
            right: 25px;
            width: 65px;
            height: 65px;
            border: 1px solid rgba(139, 58, 58, 0.2);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 4;
        }
        .postmark-wavy {
            position: absolute;
            right: -10px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        .wavy-line {
            width: 12px;
            height: 1px;
            background: rgba(139, 58, 58, 0.2);
            border-radius: 1px;
        }
        .letter-title {
            font-size: 56px;
            font-style: italic;
            text-align: center;
            background: linear-gradient(90deg, #a94442, #8b3a3a, #a94442);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% auto;
            animation: gradient-shift 4s ease infinite;
            margin-bottom: 30px;
        }
        @keyframes gradient-shift {
            0%, 100% { background-position: 0% center; }
            50% { background-position: 100% center; }
        }
        .letter-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        .letter-to, .letter-from {
            font-family: 'Dancing Script', cursive;
            font-size: 20px;
            color: #8b1a1a;
        }
        .letter-body {
            font-family: 'Crimson Pro', serif;
            font-size: 19px;
            line-height: 1.9;
            text-align: justify;
            color: #5a4a3a;
            text-indent: 40px;
            margin-bottom: 25px;
        }
        .letter-signature {
            text-align: right;
            font-family: 'Dancing Script', cursive;
            font-size: 26px;
            color: #8b1a1a;
            margin-top: 40px;
        }
        /* Click hint on letter */
        .letter-click-hint {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, rgba(169, 68, 66, 0.9), rgba(139, 58, 58, 0.9));
            color: #f5f1e8;
            padding: 10px 25px;
            border-radius: 30px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 16px;
            font-style: italic;
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(139, 58, 58, 0.4);
            z-index: 10;
            white-space: nowrap;
        }
        .music-icon {
            animation: bounce 1s ease infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        .letter-date {
            font-family: 'Crimson Pro', serif;
            font-size: 20px;
            font-weight: bold;
            color: #8b3a3a;
            margin-top: 15px;
        }
        .continue-btn {
            margin-top: 40px;
            padding: 18px 55px;
            border-radius: 50px;
            background: linear-gradient(135deg, #a94442, #8b3a3a, #a94442);
            background-size: 200% 200%;
            color: #f5f1e8;
            font-family: 'Cormorant Garamond', serif;
            font-size: 22px;
            font-style: italic;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 12px 35px rgba(139, 58, 58, 0.35);
            animation: glow-pulse 2s ease-in-out infinite;
        }
        .continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 45px rgba(139, 58, 58, 0.45);
        }
        @keyframes glow-pulse {
            0%, 100% { box-shadow: 0 12px 35px rgba(139, 58, 58, 0.35); }
            50% { box-shadow: 0 12px 50px rgba(139, 58, 58, 0.5); }
        }
        /* PAGE 3: Form */
        .form-container {
            background: rgba(245, 241, 232, 0.75);
            backdrop-filter: blur(30px) saturate(120%);
            border: 1px solid rgba(180, 150, 120, 0.35);
            border-radius: 25px;
            padding: 60px 50px;
            max-width: 750px;
            width: 100%;
            margin: 40px auto;
            box-shadow: 0 10px 40px rgba(80, 50, 30, 0.2);
            display: flex;
            flex-direction: column;
        }
        .form-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 46px;
            font-style: italic;
            color: #a94442;
            text-align: center;
            margin-bottom: 10px;
        }
        .form-subtitle {
            font-family: 'Crimson Pro', serif;
            font-size: 18px;
            font-style: italic;
            color: #6a5a4a;
            text-align: center;
            margin-bottom: 50px;
        }
        .questions-wrapper {
            flex: 1;
        }
        .question-group {
            margin-bottom: 40px;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            opacity: 0;
            transform: translateX(-30px);
            animation: slideIn 0.5s ease forwards;
        }
        .question-group:nth-child(2) { animation-delay: 0.2s; }
        .question-group:nth-child(3) { animation-delay: 0.4s; }
        .question-group:nth-child(4) { animation-delay: 0.6s; }
        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        .question-badge {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #a94442, #8b3a3a);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: 'Crimson Pro', serif;
            font-size: 18px;
            font-weight: bold;
            flex-shrink: 0;
        }
        .question-text {
            font-family: 'Crimson Pro', serif;
            font-size: 20px;
            color: #8b3a3a;
            font-weight: bold;
            padding-top: 5px;
        }
        .question-textarea {
            width: 100%;
            min-height: 130px;
            padding: 20px;
            border: 2px solid rgba(169, 68, 66, 0.3);
            border-radius: 15px;
            background: rgba(245, 241, 232, 0.5);
            font-family: 'Crimson Pro', serif;
            font-size: 17px;
            line-height: 1.6;
            color: #5a4a3a;
            resize: vertical;
            transition: all 0.3s ease;
            margin-top: 15px;
            margin-left: 51px;
        }
        .question-textarea::placeholder {
            font-style: italic;
            opacity: 0.5;
        }
        .question-textarea:focus {
            outline: none;
            border-color: #a94442;
            background: rgba(169, 68, 66, 0.08);
            box-shadow: 0 0 20px rgba(169, 68, 66, 0.2);
        }
        .form-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        .btn-back {
            padding: 18px 50px;
            border-radius: 50px;
            background: rgba(245, 241, 232, 0.9);
            color: #a94442;
            font-family: 'Cormorant Garamond', serif;
            font-size: 20px;
            border: 2px solid rgba(169, 68, 66, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-back:hover {
            background: rgba(169, 68, 66, 0.15);
        }
        .btn-submit {
            padding: 18px 50px;
            border-radius: 50px;
            background: linear-gradient(135deg, #a94442, #8b3a3a, #a94442);
            background-size: 200% 200%;
            color: #f5f1e8;
            font-family: 'Cormorant Garamond', serif;
            font-size: 20px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 30px rgba(139, 58, 58, 0.35);
            animation: glow-pulse 2s ease-in-out infinite;
        }
        .btn-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 45px rgba(139, 58, 58, 0.45);
        }
        /* PAGE 4: Success */
        .success-container {
            background: rgba(245, 241, 232, 0.9);
            backdrop-filter: blur(30px);
            border-radius: 25px;
            padding: 80px 60px;
            max-width: 650px;
            width: 100%;
            margin: 40px auto;
            text-align: center;
            box-shadow: 0 15px 50px rgba(80, 50, 30, 0.25);
        }
        .success-icon {
            font-size: 90px;
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.15); }
            50% { transform: scale(1); }
            75% { transform: scale(1.2); }
        }
        .success-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 52px;
            font-style: italic;
            color: #a94442;
            margin: 20px 0;
        }
        .success-message {
            font-family: 'Crimson Pro', serif;
            font-size: 20px;
            line-height: 1.8;
            color: #5a4a3a;
        }
        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            pointer-events: none;
        }
        /* Responsive Design */
        @media (max-width: 768px) {
            /* Envelope responsive */
            .envelope {
                width: 320px;
                height: 220px;
            }
            .envelope-flap {
                border-left: 160px solid transparent;
                border-right: 160px solid transparent;
                border-bottom: 110px solid #8b3a3a;
            }
            .envelope-flap::after {
                left: -160px;
                width: 320px;
                height: 110px;
            }
            .envelope-content {
                font-size: 80px;
            }
            
            /* Letter container */
            .letter-container {
                padding: 40px 25px;
                margin: 20px 10px;
            }
            .letter-title {
                font-size: 36px;
            }
            .letter-body {
                font-size: 17px;
                text-align: left;
                text-indent: 30px;
                line-height: 1.8;
            }
            .letter-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            .letter-to, .letter-from {
                font-size: 18px;
            }
            
            /* Stamps */
            .stamps-container {
                flex-direction: row;
                top: 8px;
                right: 10px;
                gap: 4px;
            }
            .stamp {
                width: 35px;
                height: 42px;
            }
            .stamp-icon {
                font-size: 16px;
            }
            .postmark {
                width: 55px;
                height: 55px;
                bottom: 10px;
                right: 15px;
            }
            .postmark-wavy {
                right: -8px;
                gap: 3px;
            }
            .wavy-line {
                width: 10px;
            }
            
            /* Form */
            .form-container {
                padding: 30px 18px;
                margin: 15px 10px;
            }
            .form-title {
                font-size: 28px;
            }
            .form-subtitle {
                font-size: 14px;
                margin-bottom: 25px;
            }
            .questions-wrapper {
                margin-bottom: 20px;
            }
            .question-group {
                flex-direction: column;
                gap: 8px;
                margin-bottom: 25px;
            }
            .question-textarea {
                margin-left: 0;
                min-height: 100px;
                font-size: 15px;
                padding: 12px;
            }
            .question-badge {
                width: 30px;
                height: 30px;
                font-size: 14px;
            }
            .question-text {
                font-size: 15px;
                padding-top: 0;
            }
            .form-buttons {
                flex-direction: column;
                width: 100%;
                gap: 12px;
                margin-top: 20px;
            }
            .btn-back, .btn-submit {
                width: 100%;
                padding: 12px 20px;
                font-size: 15px;
            }
            
            /* Card */
            .card-content {
                padding: 35px 25px;
                margin: 15px;
            }
            .card-title {
                font-size: 32px;
                margin-bottom: 20px;
            }
            .card-message {
                font-size: 18px;
                line-height: 1.7;
                margin-bottom: 25px;
            }
            .card-btn {
                padding: 12px 30px;
                font-size: 16px;
            }
            
            /* Corner decorations */
            .corner-decor {
                font-size: 40px;
            }
            
            /* Audio player */
            .audio-player-container {
                width: 90%;
                padding: 12px 20px;
                gap: 12px;
            }
            .audio-play-btn {
                width: 40px;
                height: 40px;
            }
            .audio-visualizer {
                height: 25px;
            }
            .audio-title {
                font-size: 16px;
            }
            .audio-artist {
                font-size: 12px;
            }
            
            /* Click hint */
            .letter-click-hint {
                font-size: 14px;
                padding: 8px 18px;
            }
        }
        
        @media (max-width: 480px) {
            /* Smaller envelope */
            .envelope {
                width: 280px;
                height: 190px;
            }
            .envelope-flap {
                border-left: 140px solid transparent;
                border-right: 140px solid transparent;
                border-bottom: 95px solid #8b3a3a;
            }
            .envelope-flap::after {
                left: -140px;
                width: 280px;
                height: 95px;
            }
            .envelope-content {
                font-size: 70px;
            }
            
            /* Letter */
            .letter-container {
                padding: 30px 18px;
                margin: 15px 8px;
            }
            .letter-title {
                font-size: 28px;
                margin-bottom: 20px;
            }
            .letter-body {
                font-size: 15px;
                text-indent: 25px;
                margin-bottom: 18px;
                line-height: 1.7;
            }
            .letter-to, .letter-from {
                font-size: 16px;
            }
            .letter-signature {
                font-size: 22px;
                margin-top: 30px;
            }
            .letter-date {
                font-size: 18px;
            }
            
            /* Continue button */
            .continue-btn {
                padding: 12px 30px;
                font-size: 16px;
                margin-top: 30px;
            }
            
            /* Question text */
            .question-text {
                font-size: 16px;
            }
            .question-badge {
                width: 32px;
                height: 32px;
                font-size: 16px;
            }
            
            /* Success page */
            .success-container {
                padding: 50px 30px;
                margin: 20px 10px;
            }
            .success-title {
                font-size: 32px;
            }
            .success-message {
                font-size: 16px;
            }
            
            /* Audio player */
            .audio-player-container {
                padding: 10px 15px;
                border-radius: 25px;
            }
            .audio-play-btn {
                width: 36px;
                height: 36px;
            }
            .audio-visualizer {
                display: none;
            }
            .audio-title {
                font-size: 14px;
            }
            .audio-artist {
                font-size: 11px;
            }
            
            /* Hide click hint on mobile */
            .letter-click-hint {
                display: none;
            }
        }
        /* Touch-friendly targets */
        @media (hover: none) {
            .envelope.opening {
                transform: scale(1);
            }
            .letter-container:hover {
                transform: none;
            }
        }
        /* Audio Player */
        .audio-player-container {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(145deg, rgba(253, 251, 249, 0.95), rgba(245, 241, 235, 0.95));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(180, 150, 120, 0.4);
            border-radius: 50px;
            padding: 15px 30px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 10px 40px rgba(80, 50, 30, 0.25);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }
        .audio-player-container.active {
            opacity: 1;
            visibility: visible;
        }
        .audio-play-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #a94442, #8b3a3a);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 58, 58, 0.4);
        }
        .audio-play-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(139, 58, 58, 0.5);
        }
        .audio-play-btn svg {
            width: 20px;
            height: 20px;
            fill: #f5f1e8;
        }
        .audio-info {
            flex: 1;
        }
        .audio-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 18px;
            font-style: italic;
            color: #8b3a3a;
            margin-bottom: 5px;
        }
        .audio-artist {
            font-family: 'Crimson Pro', serif;
            font-size: 14px;
            color: #5a4a3a;
        }
        .audio-close {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(169, 68, 66, 0.2);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .audio-close:hover {
            background: rgba(169, 68, 66, 0.4);
        }
        .audio-close svg {
            width: 14px;
            height: 14px;
            fill: #a94442;
        }
        /* Visualizer bars */
        .audio-visualizer {
            display: flex;
            align-items: center;
            gap: 3px;
            height: 30px;
        }
        .visualizer-bar {
            width: 4px;
            background: linear-gradient(180deg, #a94442, #8b3a3a);
            border-radius: 2px;
            transition: height 0.1s ease;
        }
        .visualizer-bar.active {
            animation: visualize 0.5s ease-in-out infinite;
        }
        @keyframes visualize {
            0%, 100% { height: 8px; }
            50% { height: 24px; }
        }
        .visualizer-bar:nth-child(1) { animation-delay: 0s; }
        .visualizer-bar:nth-child(2) { animation-delay: 0.1s; }
        .visualizer-bar:nth-child(3) { animation-delay: 0.2s; }
        .visualizer-bar:nth-child(4) { animation-delay: 0.15s; }
        .visualizer-bar:nth-child(5) { animation-delay: 0.25s; }
    </style>
</head>
<body>
    <!-- Noise Texture -->
    <div class="noise"></div>
    
    <!-- Radial Vignette -->
    <div class="vignette"></div>
    <!-- Corner Decorations -->
    <div class="corner-decor corner-tl">üå∏</div>
    <div class="corner-decor corner-tr">‚ú®</div>
    <div class="corner-decor corner-bl">üíê</div>
    <div class="corner-decor corner-br">ü¶ã</div>
    <!-- Floating Flowers Container -->
    <div id="flowers-container"></div>
    <!-- PAGE 1: Envelope -->
    <div class="page active" id="page-1">
        <div class="envelope-wrapper" id="envelope-wrapper">
            <div class="envelope" id="envelope" onclick="openEnvelope()">
                <div class="envelope-body">
                    <div class="envelope-flap"></div>
                    <div class="envelope-content">
                        <span>üíå</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="fullscreen-card" id="fullscreen-card">
            <div class="card-content">
                <h1 class="card-title">Surat Untukmu</h1>
                <p class="card-message">Halo! Aku cuma mau nyampain sedikit dari banyak kata yang udah aku rangkai buat kamu...</p>
                <button class="card-btn" onclick="goToPage(2)">Lanjut üíï</button>
            </div>
        </div>
    </div>
    <!-- PAGE 2: Letter -->
    <div class="page" id="page-2">
        <div class="letter-container" id="letter-container" onclick="playMusic()">
            <div class="letter-lines"></div>
            <div class="letter-margin-line"></div>
            
            <div class="stamps-container">
                <div class="stamp">
                    <div class="stamp-icon">üíï</div>
                    <div class="stamp-text">POSTAGE</div>
                </div>
                <div class="stamp">
                    <div class="stamp-icon">üîê</div>
                    <div class="stamp-text">POSTAGE</div>
                </div>
            </div>
            
            <div class="postmark">
                <div class="postmark-wavy">
                    <div class="wavy-line"></div>
                    <div class="wavy-line"></div>
                    <div class="wavy-line"></div>
                    <div class="wavy-line"></div>
                </div>
            </div>
            
            <h1 class="letter-title">Surat Untukmu</h1>
            
            <div class="letter-click-hint">
                <span class="music-icon">üéµ</span>
                <span>Klik untuk dengarkan lagu üíï</span>
            </div>
            
            <div class="letter-header">
                <div class="letter-to">Dari: Kamu yang kusayang</div>
                <div class="letter-from">Untuk: Seseorang yang peduli</div>
            </div>
            
            <div class="letter-body">
                Halo! Aku cuma mau nyampain sedikit dari banyak kata yang udah aku rangkai buat kamu. Huft, nggak terasa ya kita udah kenal selama ini? Banyak banget peristiwa yang bikin aku selalu bersyukur bisa kenal sama kamu.
            </div>
            
            <div class="letter-body">
                Aku sadar aku bukan siapa siapa, I'm not special and I'm perfect. Aku cuma manusia biasa yang berusaha untuk selalu paham sama kondisi kamu mau kamu lagi sedih, marah, kesal, atau senang. Everything.
            </div>
            
            <div class="letter-body">
                Satu hal yang selalu aku ingat tentang kamu, kamu itu wanita yang benar benar kuat banget. I'm so proud of you.
            </div>
            
            <div class="letter-body">
                Udah ah, segini dulu aja, takutnya kepanjangan terus nggak kamu baca. Awas aja kalau nggak dibaca, aku doain Mercy nggak menang menang! Hahaha. Anyway, simpan zine ini ya, biar suatu hari nanti kamu bisa baca lagi dan inget kalau ada seseorang yang selalu sayang sama kamu.
            </div>
            
            <div class="letter-signature">Bye bye... Tataaa! ‚ù§Ô∏è</div>
            <div class="letter-date">02/01/26</div>
            
            <button class="continue-btn" onclick="goToPage(3)">Lanjut üíï</button>
        </div>
    </div>
    <!-- PAGE 3: Form -->
    <div class="page" id="page-3">
        <div class="form-container">
            <h1 class="form-title">Sebelum kamu pergi...</h1>
            <p class="form-subtitle">Jawab pertanyaan ini untuk aku ya üíï</p>
            
            <div class="questions-wrapper">
                <div class="question-group">
                    <div class="question-badge">1</div>
                    <div class="question-text">Kalau semua kenangan kita dihapus kecuali satu, kamu mau simpan momen pas lagi apa?</div>
                    <textarea class="question-textarea" placeholder="Tulis jawabanmu di sini..."></textarea>
                </div>
                
                <div class="question-group">
                    <div class="question-badge">2</div>
                    <div class="question-text">Kalau kita ketemu di kehidupan lain, kamu bakal nunggu aku yang samperin atau kamu yang nyari duluan?</div>
                    <textarea class="question-textarea" placeholder="Tulis jawabanmu di sini..."></textarea>
                </div>
                
                <div class="question-group">
                    <div class="question-badge">3</div>
                    <div class="question-text">Kenapa dari sekian banyak orang, kamu akhirnya 'nyangkut' di aku?</div>
                    <textarea class="question-textarea" placeholder="Tulis jawabanmu di sini..."></textarea>
                </div>
            </div>
            
            <div class="form-buttons">
                <button class="btn-back" onclick="goToPage(2)">Kembali</button>
                <button class="btn-submit" onclick="submitForm()">Kirim Jawaban üíå</button>
            </div>
        </div>
    </div>
    <!-- PAGE 4: Success -->
    <div class="page" id="page-4">
        <div class="success-container">
            <div class="success-icon">üíå</div>
            <h1 class="success-title">Terima Kasih!</h1>
            <p class="success-message">Jawabanmu sudah tersimpan. Aku senang banget kamu mau jawab pertanyaan-pertanyaan itu. Simpan kenangan ini baik-baik ya üíï</p>
        </div>
    </div>
    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas"></canvas>
    
    <!-- Audio Player -->
    <audio id="bg-music" preload="auto">
        <source src="./Bryan Adams - Heaven Classic Version.mp3" type="audio/mpeg">
    </audio>
    
    <div class="audio-player-container" id="audio-player">
        <button class="audio-play-btn" id="audio-play-btn" onclick="togglePlay()">
            <svg id="play-icon" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z"/>
            </svg>
            <svg id="pause-icon" viewBox="0 0 24 24" style="display:none;">
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
            </svg>
        </button>
        <div class="audio-visualizer">
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
            <div class="visualizer-bar"></div>
        </div>
        <div class="audio-info">
            <div class="audio-title">Heaven - Bryan Adams</div>
            <div class="audio-artist">Classic Version</div>
        </div>
        <button class="audio-close" onclick="closeAudioPlayer()">
            <svg viewBox="0 0 24 24">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
        </button>
    </div>
    
    <script>
        // Flower emojis
        const flowerEmojis = ['üå∏', 'üå∫', 'üåº', 'üåª', 'üå∑', 'üèµÔ∏è', 'üíÆ', 'üåπ'];
        
        // Create floating flowers
        function createFlowers() {
            const container = document.getElementById('flowers-container');
            
            for (let i = 0; i < 20; i++) {
                const flower = document.createElement('div');
                flower.className = 'flower';
                flower.textContent = flowerEmojis[Math.floor(Math.random() * flowerEmojis.length)];
                flower.style.left = Math.random() * 100 + 'vw';
                flower.style.fontSize = (Math.random() * 20 + 20) + 'px';
                
                const duration = Math.random() * 7 + 18; // 18-25 seconds
                const delay = Math.random() * 10;
                
                flower.style.animation = `floatFlower ${duration}s linear ${delay}s infinite`;
                container.appendChild(flower);
            }
            
            // Add flower animation keyframes
            const style = document.createElement('style');
            style.textContent = `
                @keyframes floatFlower {
                    0% {
                        transform: translateY(110vh) rotate(0deg);
                        opacity: 0;
                    }
                    5% {
                        opacity: 0.3;
                    }
                    50% {
                        opacity: 0.3;
                    }
                    95% {
                        opacity: 0;
                    }
                    100% {
                        transform: translateY(-10vh) rotate(360deg);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        }
        
        // Envelope click handler
        let envelopeOpened = false;
        
        function openEnvelope() {
            if (envelopeOpened) return;
            envelopeOpened = true;
            
            const envelope = document.getElementById('envelope');
            const wrapper = document.getElementById('envelope-wrapper');
            const fullscreenCard = document.getElementById('fullscreen-card');
            
            // Stage 1: Open flap animation
            envelope.classList.add('opening');
            
            // Stage 2: Expand to fullscreen (after 600ms)
            setTimeout(() => {
                wrapper.classList.add('expanded');
            }, 600);
            
            // Stage 3: Show fullscreen card (after 1000ms)
            setTimeout(() => {
                fullscreenCard.classList.add('active');
            }, 1000);
        }
        
        // Navigate to page
        function goToPage(pageNum) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById('page-' + pageNum).classList.add('active');
        }
        
        // Submit form
        function submitForm() {
            const questions = [
                'Kalau semua kenangan kita dihapus kecuali satu, kamu mau simpan momen pas lagi apa?',
                'Kalau kita ketemu di kehidupan lain, kamu bakal nunggu aku yang samperin atau kamu yang nyari duluan?',
                'Kenapa dari sekian banyak orang, kamu akhirnya \'nyangkut\' di aku?'
            ];
            
            const answers = [];
            document.querySelectorAll('.question-textarea').forEach((textarea, index) => {
                answers.push({
                    question: questions[index],
                    answer: textarea.value.trim()
                });
            });
            
            // Prepare data for Formspree
            const formData = {
                answers: answers,
                timestamp: new Date().toISOString()
            };
            
            // Send to Formspree
            fetch('https://formspree.io/f/xaqbynlk', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => {
                if (response.ok) {
                    // Go to success page with confetti
                    goToPage(4);
                    startConfetti();
                } else {
                    alert('Terjadi kesalahan. Silakan coba lagi.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Terjadi kesalahan. Silakan coba lagi.');
            });
        }
        
        // Confetti animation
        function startConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const colors = ['#ff6b9d', '#a94442', '#ffd700', '#ff69b4', '#87ceeb'];
            const pieces = [];
            
            for (let i = 0; i < 150; i++) {
                pieces.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    size: Math.random() * 8 + 5,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    speedY: Math.random() * 3 + 2,
                    speedX: Math.random() * 2 - 1,
                    rotation: Math.random() * 360,
                    rotationSpeed: Math.random() * 10 - 5
                });
            }
            
            let startTime = Date.now();
            
            function animate() {
                const elapsed = Date.now() - startTime;
                
                if (elapsed < 10000) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    pieces.forEach(piece => {
                        ctx.save();
                        ctx.translate(piece.x, piece.y);
                        ctx.rotate(piece.rotation * Math.PI / 180);
                        ctx.fillStyle = piece.color;
                        ctx.fillRect(-piece.size / 2, -piece.size / 2, piece.size, piece.size);
                        ctx.restore();
                        
                        piece.y += piece.speedY;
                        piece.x += piece.speedX;
                        piece.rotation += piece.rotationSpeed;
                        
                        if (piece.y > canvas.height) {
                            piece.y = -piece.size;
                            piece.x = Math.random() * canvas.width;
                        }
                    });
                    
                    requestAnimationFrame(animate);
                } else if (elapsed < 12000) {
                    // Fade out
                    canvas.style.transition = 'opacity 2s';
                    canvas.style.opacity = '0';
                } else {
                    canvas.remove();
                }
            }
            
            animate();
        }
        
        // Handle window resize
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                const canvas = document.getElementById('confetti-canvas');
                if (canvas) {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                }
            }, 100);
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            createFlowers();
            
            // Debug: Check if audio file exists
            const audioSource = bgMusic.querySelector('source');
            console.log('Audio file path:', audioSource.src);
            
            // Add error listener to audio element
            bgMusic.addEventListener('error', function() {
                console.error('Audio error code:', bgMusic.error.code);
                console.error('Audio error message:', bgMusic.error.message);
                console.log('Supported audio formats: MP3');
            });
        });
        
        // Music player functionality
        let musicPlaying = false;
        const bgMusic = document.getElementById('bg-music');
        const audioPlayer = document.getElementById('audio-player');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');
        const visualizerBars = document.querySelectorAll('.visualizer-bar');
        
        function playMusic() {
            // Debug: Log the audio source
            console.log('Audio source:', bgMusic.querySelector('source').src);
            
            // Show and play music
            audioPlayer.classList.add('active');
            
            bgMusic.play().then(() => {
                musicPlaying = true;
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
                visualizerBars.forEach(bar => bar.classList.add('active'));
                console.log('Audio playing successfully');
            }).catch(error => {
                console.error('Audio playback failed:', error);
                console.error('Error name:', error.name);
                console.error('Error message:', error.message);
                alert('Tidak dapat memutar lagu. Cek console untuk detail error.');
            });
        }
        
        function togglePlay() {
            if (musicPlaying) {
                bgMusic.pause();
                musicPlaying = false;
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
                visualizerBars.forEach(bar => bar.classList.remove('active'));
            } else {
                bgMusic.play();
                musicPlaying = true;
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
                visualizerBars.forEach(bar => bar.classList.add('active'));
            }
        }
        
        function closeAudioPlayer() {
            bgMusic.pause();
            bgMusic.currentTime = 0;
            musicPlaying = false;
            audioPlayer.classList.remove('active');
            playIcon.style.display = 'block';
            pauseIcon.style.display = 'none';
            visualizerBars.forEach(bar => bar.classList.remove('active'));
        }
        
        // Reset music when going back from page 2
        const originalGoToPage = goToPage;
        goToPage = function(pageNum) {
            if (pageNum !== 2) {
                closeAudioPlayer();
            }
            originalGoToPage(pageNum);
        };
    </script>
</body>
</html>
